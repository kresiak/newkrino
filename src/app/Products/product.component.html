<template #mymodal let-c="close" let-d="dismiss">
	<div class="modal-header">
		<button type="button" class="close" (click)="d('Cross click')">
            <span >&times;</span>
        </button>
		<h4 class="modal-title">Order a product from the fridge</h4>
	</div>
	<div class="modal-body">
		<div class="card">
			<div class="card-block">
				<div class="row">
					<div class="col-sm-3">You will order:</div>
					<div class="col-sm-8">{{product.data.name}}  {{product.data.package}}</div>
				</div>
				<div class="row">
					<div class="col-sm-3">From the fridge of:</div>
					<div class="col-sm-8">{{product.annotation.supplierName}}</div>
				</div>
				<div class="row">
					<div class="col-sm-3">At following unitary price:</div>
					<div class="col-sm-8">{{product.data.price  | currency:'EUR':true:'1.2-2'}}</div>
				</div>
				<div class="row">
					<div class="col-sm-3 vcenter">Quantity to order:</div>
					<div class="col-sm-8 vcenter"><input #inputQty type="number" class="form-control" placeholder="enter quantity to order" min="1" max="20"/></div>
				</div>
			</div>
		</div>
	</div>
	<div class="modal-footer">
		<div class="enter-newselectableitem__l-container">
			<div class="row">
				<div class="col-sm-2">

				</div>
				<div class="col-sm-3">
                    <button type="button" class="btn btn-success" 
					(click)="c({qty:inputQty.value })">Send request</button>
				</div>
			</div>
		</div>		
	</div>
</template>


<div class="row" *ngIf="product && product.data">
	<div class="col-sm-2 col-md-2 vcenter">
		<gg-editor [content]="product.data.name" [showControls]="true" (editSaved)="descriptionUpdated($event)"></gg-editor>
	</div>
	<div class="col-sm-2 col-md-2 vcenter" *ngIf="showColumn('supplier')">{{product.annotation.supplierName}}</div>
	<div class="col-sm-2 col-md-2 vcenter">
		<gg-editor #prix [content]="product.data.price" [showControls]="true" [isMonetary]="true" (editSaved)="prixUpdated($event)"></gg-editor>
	</div>
	<div class="col-sm-3 col-md-3 vcenter" *ngIf="showColumn('category')"> 
		<gg-selector [selectableData]="selectableCategoriesObservable" [selectedIds]="selectedCategoryIdsObservable" 
		(selectionChanged)="categorySelectionChanged($event)" (selectionOptionAdded)="categoryHasBeenAdded($event)"></gg-selector>
	</div>
<!--	<div class="col-sm-2 col-md-2 vcenter" *ngIf="showColumn('manip')"> 
		<gg-selector [selectableData]="selectableManipsObservable" [selectedIds]="selectedManipIdsObservable" 
		(selectionChanged)="manipSelectionChanged($event)"></gg-selector>
	</div>
-->	<div class="col-sm-2 col-md-2 vcenter">
		<gg-editor-number *ngIf="product.annotation.hasUserPermissionToShop && !product.data.isFrigo" [content]="product.annotation.quantity" (editSaved)="quantityBasketUpdated($event)"></gg-editor-number> 		
		<div *ngIf="!product.annotation.hasUserPermissionToShop && !product.data.isFrigo">{{product.annotation.quantity}} (Contact Labmanager)</div>
		<a class="imgSearch" (click)="openModal(mymodal)"> <img *ngIf="product.data.isFrigo" height="25" width="25" src="../../images/refrigator.png" /> </a>
	</div>
	<div class="col-sm-2 col-md-2 vcenter" *ngIf="product.annotation.totalPrice && showColumn('totalPrice')">{{product.annotation.totalPrice | currency:'EUR':true:'1.2-2'}}</div>
	<div class="col-sm-3 col-md-3 vcenter" *ngIf="product.annotation.otp && showColumn('otp')">{{product.annotation.otp.name}}</div>
	<div class="col-sm-2 col-md-2 vcenter" *ngIf="product.annotation.otp && !product.annotation.otp._id"><b>Otp problem!</b></div>
</div>